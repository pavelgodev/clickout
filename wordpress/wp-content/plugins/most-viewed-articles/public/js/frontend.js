!function(n){var i="undefined"!=typeof MVA_Config&&MVA_Config.rest_url?MVA_Config.rest_url:"/wp-json/mva/v1",e="undefined"!=typeof MVA_Config&&MVA_Config.nonce?MVA_Config.nonce:"";function a(e,a){var t=i+"/top?period="+encodeURIComponent(e)+"&limit=10";a.find(".mva-loading").show(),fetch(t,{credentials:"same-origin"}).then(function(n){return n.json()}).then(function(i){a.find(".mva-loading").hide();var e=a.find(".mva-list-items");e.length?e.empty():(e=n('<div class="mva-list-items"></div>'),a.find(".mva-list").empty().append(e)),i.success&&i.items&&0!==i.items.length?(console.log(i.items),i.items.forEach(function(i){var a=n('<div class="mva-line"></div>');a.append('<div class="mva-rank">'+i.rank+".</div>"),a.append('<div class="mva-title"><a href="'+i.link+'">'+i.title+"</a></div>"),e.append(a)})):e.append('<div class="mva-empty">No articles found.</div>')}).catch(function(){a.find(".mva-loading").hide(),a.find(".mva-list").html('<div class="mva-error">Error loading items</div>')})}n(document).ready(function(){n(".mva-widget").each(function(){var t=n(this),o=t.data("post-id")||"";o&&n("body").hasClass("single-post")&&function(n){if(n){var a=i+"/count-view",t=new FormData;t.append("post_id",n),t.append("_wpnonce",e),fetch(a,{method:"POST",credentials:"same-origin",body:t}).then(function(n){return n.json()}).then(function(n){}).catch(function(){})}}(o),a("week",t),t.on("click",".mva-tab",function(i){i.preventDefault();var e=n(this);e.hasClass("mva-active")||(e.siblings().removeClass("mva-active"),e.addClass("mva-active"),a(e.data("period")||"week",t))})})})}(jQuery);